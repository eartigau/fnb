<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Info sur iShares S&P 500 3% Capped Index ETF CAD Units</title>
<!-- Styles -->
<link rel="stylesheet" href="disnat-style.css">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
  body { margin: 0; }

  /* Ajustement des filtres */
  .filters input[type="number"] {
    width: 5ch;
    padding: 2px;
    box-sizing: content-box;
  }

  /* --- Grille 2x2 pour graphiques --- */
  .plots {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* exactement 2 colonnes */
    gap: 16px;
    margin: 16px 0;
  }
  /* Responsive sur écran petit */
  @media (max-width: 700px) {
    .plots {
      grid-template-columns: 1fr; /* 1 colonne sur mobile */
    }
  }

  .plot-box {
    border: 1px solid rgba(0,0,0,0.1);
    border-radius: 6px;
    padding: 8px;
    box-sizing: border-box;
    background: white;
    height: 0;
    padding-bottom: 66.66%; /* ratio 3:2 */
    position: relative;
  }
  .plot-box > div {
    position: absolute;
    top: 0; left: 0;
    width: 100% !important;
    height: 100% !important;
  }

  /* Info portefeuille à côté si écran large */
  .grid {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
  }
  .ticker-info {
    flex: 1 1 300px;
    min-width: 300px;
    max-width: 400px;
  }
  .plots {
    flex: 2 1 600px;
    min-width: 300px;
  }
</style>
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="brand">
        <div class="logo">FNB</div>
        <h1>iShares S&P 500 3% Capped Index ETF CAD Units</h1>
      </div>
      <nav class="nav">
        <a href="index.html">Accueil</a>
        <a href="documentation.html">Documentation</a>
      </nav>
    </header>
  </div>

  <h2>Évolution du portefeuille et analyse</h2>

  <div class="grid">
    <div class="plots">
      <div class="plot-box"><div id="graph1"></div></div>
      <div class="plot-box"><div id="graph2"></div></div>
      <div class="plot-box"><div id="graph3"></div></div>
      <div class="plot-box"><div id="graph4"></div></div>
    </div>

    <div class="ticker-info card">
      <h3>Infos Portefeuille</h3>
      <p><span class="kicker">Ticker</span> <strong>XUSC.TO</strong></p>
      <p><span class="kicker">Nom</span> iShares S&P 500 3% Capped Index ETF CAD Units</p>
      <p><span class="kicker">Âge du FNB</span> 1.27 ans</p>
      <p><span class="kicker">Creux COVID-19 [S&P500]</span> nan% [-24.0%]</p>
      <p><span class="kicker">Creux 2022 [S&P500]</span> nan% [-15.9%]</p>
      <p><span class="kicker">Creux Tarif [S&P500]</span> -9.6% [-8.8%]</p>
      <p><span class="kicker">Croissance annuelle [S&P500]</span> 13.2 [12.7] %</p>
      <p><span class="kicker">Volatilité annuelle [S&P500]</span> 4.5 [4.4] %</p>
    </div>
  </div>

<script>
  // --- Données séries temporelles ---
  const dates1 = ["2024-07-18","2024-07-19","2024-07-22","2024-07-23","2024-07-24","2024-07-25","2024-07-26","2024-07-29","2024-07-30","2024-07-31","2024-08-01","2024-08-02","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-12","2024-08-13","2024-08-14","2024-08-15","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30","2024-09-03","2024-09-04","2024-09-05","2024-09-06","2024-09-09","2024-09-10","2024-09-11","2024-09-12","2024-09-13","2024-09-16","2024-09-17","2024-09-18","2024-09-19","2024-09-20","2024-09-23","2024-09-24","2024-09-25","2024-09-26","2024-09-27","2024-09-30","2024-10-01","2024-10-02","2024-10-03","2024-10-04","2024-10-07","2024-10-08","2024-10-09","2024-10-10","2024-10-11","2024-10-15","2024-10-16","2024-10-17","2024-10-18","2024-10-21","2024-10-22","2024-10-23","2024-10-24","2024-10-25","2024-10-28","2024-10-29","2024-10-30","2024-10-31","2024-11-01","2024-11-04","2024-11-05","2024-11-06","2024-11-07","2024-11-08","2024-11-11","2024-11-12","2024-11-13","2024-11-14","2024-11-15","2024-11-18","2024-11-19","2024-11-20","2024-11-21","2024-11-22","2024-11-25","2024-11-26","2024-11-27","2024-11-28","2024-11-29","2024-12-02","2024-12-03","2024-12-04","2024-12-05","2024-12-06","2024-12-09","2024-12-10","2024-12-11","2024-12-12","2024-12-13","2024-12-16","2024-12-17","2024-12-18","2024-12-19","2024-12-20","2024-12-23","2024-12-24","2024-12-27","2024-12-30","2024-12-31","2025-01-02","2025-01-03","2025-01-06","2025-01-07","2025-01-08","2025-01-09","2025-01-10","2025-01-13","2025-01-14","2025-01-15","2025-01-16","2025-01-17","2025-01-20","2025-01-21","2025-01-22","2025-01-23","2025-01-24","2025-01-27","2025-01-28","2025-01-29","2025-01-30","2025-01-31","2025-02-03","2025-02-04","2025-02-05","2025-02-06","2025-02-07","2025-02-10","2025-02-11","2025-02-12","2025-02-13","2025-02-14","2025-02-18","2025-02-19","2025-02-20","2025-02-21","2025-02-24","2025-02-25","2025-02-26","2025-02-27","2025-02-28","2025-03-03","2025-03-04","2025-03-05","2025-03-06","2025-03-07","2025-03-10","2025-03-11","2025-03-12","2025-03-13","2025-03-14","2025-03-17","2025-03-18","2025-03-19","2025-03-20","2025-03-21","2025-03-24","2025-03-25","2025-03-26","2025-03-27","2025-03-28","2025-03-31","2025-04-01","2025-04-02","2025-04-03","2025-04-04","2025-04-07","2025-04-08","2025-04-09","2025-04-10","2025-04-11","2025-04-14","2025-04-15","2025-04-16","2025-04-17","2025-04-21","2025-04-22","2025-04-23","2025-04-24","2025-04-25","2025-04-28","2025-04-29","2025-04-30","2025-05-01","2025-05-02","2025-05-05","2025-05-06","2025-05-07","2025-05-08","2025-05-09","2025-05-12","2025-05-13","2025-05-14","2025-05-15","2025-05-16","2025-05-20","2025-05-21","2025-05-22","2025-05-23","2025-05-26","2025-05-27","2025-05-28","2025-05-29","2025-05-30","2025-06-02","2025-06-03","2025-06-04","2025-06-05","2025-06-06","2025-06-09","2025-06-10","2025-06-11","2025-06-12","2025-06-13","2025-06-16","2025-06-17","2025-06-18","2025-06-19","2025-06-20","2025-06-23","2025-06-24","2025-06-25","2025-06-26","2025-06-27","2025-06-30","2025-07-02","2025-07-03","2025-07-04","2025-07-07","2025-07-08","2025-07-09","2025-07-10","2025-07-11","2025-07-14","2025-07-15","2025-07-16","2025-07-17","2025-07-18","2025-07-21","2025-07-22","2025-07-23","2025-07-24","2025-07-25","2025-07-28","2025-07-29","2025-07-30","2025-07-31","2025-08-01","2025-08-05","2025-08-06","2025-08-07","2025-08-08","2025-08-11","2025-08-12","2025-08-13","2025-08-14","2025-08-15","2025-08-18","2025-08-19","2025-08-20","2025-08-21","2025-08-22","2025-08-25","2025-08-26","2025-08-27","2025-08-28","2025-08-29","2025-09-02","2025-09-03","2025-09-04","2025-09-05","2025-09-08","2025-09-09","2025-09-10","2025-09-11","2025-09-12","2025-09-15","2025-09-16","2025-09-17","2025-09-18","2025-09-19","2025-09-22","2025-09-23","2025-09-24","2025-09-25","2025-09-26","2025-09-29","2025-09-30","2025-10-01","2025-10-02","2025-10-03","2025-10-06","2025-10-07","2025-10-08","2025-10-09","2025-10-10","2025-10-14","2025-10-15","2025-10-16","2025-10-17","2025-10-20","2025-10-21","2025-10-22","2025-10-23","2025-10-24"];;
  const close1 =  [10000,9960,10039,10044,9881,9881,9972,10002,9982,10056,9977,9784,9593,9497,9680,9727,9725,9824,9851,10042,10029,10056,10054,10061,10017,10047,10007,9995,9952,9992,10024,10000,9943,9888,9769,9881,9935,9997,10061,10153,10168,10188,10170,10268,10257,10250,10222,10227,10242,10302,10341,10262,10237,10252,10354,10304,10408,10525,10525,10619,10624,10653,10683,10735,10703,10681,10604,10646,10653,10700,10725,10695,10542,10586,10502,10579,10939,10953,11054,11102,11074,11106,11067,10965,10946,10926,10958,11027,11092,11141,11255,11188,11210,11245,11270,11267,11312,11277,11386,11332,11302,11379,11369,11386,11448,11431,11208,11171,11218,11282,11394,11349,11212,11175,11143,11317,11267,11170,11230,11267,11118,11056,11096,11299,11364,11528,11629,11530,11610,11627,11627,11513,11587,11605,11741,11684,11699,11551,11605,11612,11520,11587,11572,11533,11572,11540,11560,11642,11530,11399,11381,11369,11401,11379,11508,11374,11200,11222,10996,11118,10887,10838,10810,10681,10860,10900,10803,10932,10897,10900,11081,11063,10959,10964,10758,10830,10818,10845,10264,9748,9718,9591,10353,9889,10008,10108,10135,9805,9917,9646,9879,10056,10242,10316,10304,10368,10341,10468,10574,10507,10403,10388,10694,10599,10959,11021,10999,11054,11061,11086,10865,10885,10706,10900,10952,10937,10924,10877,10900,10987,10949,10872,10994,11009,11051,11039,11006,10877,10942,10927,10969,11014,10972,11058,11202,11164,11187,11251,11271,11296,11404,11301,11334,11359,11421,11421,11409,11433,11394,11369,11384,11471,11468,11421,11496,11538,11638,11645,11650,11628,11660,11409,11508,11536,11498,11598,11583,11718,11718,11785,11773,11775,11773,11775,11748,11865,11845,11860,11855,11857,11758,11710,11790,11895,11927,11892,11985,12030,12127,12104,12082,12067,12087,12154,12154,12249,12212,12239,12199,12274,12329,12324,12366,12401,12411,12449,12411,12469,12484,12169,12386,12451,12354,12376,12526,12523,12399,12506,12641];;
  const div1 =  [10000,9960,10039,10044,9881,9881,9972,10002,9982,10056,9977,9784,9593,9497,9680,9727,9725,9824,9851,10042,10029,10056,10054,10061,10017,10047,10007,9995,9952,9992,10024,10000,9943,9888,9769,9881,9935,9997,10061,10153,10168,10188,10170,10268,10257,10250,10222,10227,10242,10302,10341,10262,10237,10252,10354,10304,10408,10525,10525,10619,10624,10653,10683,10735,10703,10681,10604,10646,10653,10700,10725,10695,10542,10586,10502,10579,10939,10953,11054,11102,11074,11106,11067,10965,10946,10926,10958,11027,11092,11141,11255,11188,11210,11245,11270,11267,11312,11277,11386,11332,11302,11379,11369,11386,11448,11431,11208,11171,11218,11282,11394,11349,11212,11175,11143,11317,11267,11170,11230,11267,11118,11056,11096,11299,11364,11528,11629,11530,11610,11627,11627,11513,11587,11605,11741,11684,11699,11551,11605,11612,11520,11587,11572,11533,11572,11540,11560,11642,11530,11399,11381,11369,11401,11379,11508,11374,11200,11222,10996,11118,10887,10838,10810,10681,10860,10900,10803,10932,10897,10900,11081,11063,10959,10964,10758,10830,10818,10845,10264,9748,9718,9591,10353,9889,10008,10108,10135,9805,9917,9646,9879,10056,10242,10316,10304,10368,10341,10468,10574,10507,10403,10388,10694,10599,10959,11021,10999,11054,11061,11086,10865,10885,10706,10900,10952,10937,10924,10877,10900,10987,10949,10872,10994,11009,11051,11039,11006,10877,10942,10927,10969,11014,10972,11058,11202,11164,11187,11251,11271,11296,11404,11301,11334,11359,11421,11421,11409,11433,11394,11369,11384,11471,11468,11421,11496,11538,11638,11645,11650,11628,11660,11409,11508,11536,11498,11598,11583,11718,11718,11785,11773,11775,11773,11775,11748,11865,11845,11860,11855,11857,11758,11710,11790,11895,11927,11892,11985,12030,12127,12104,12082,12067,12087,12154,12154,12249,12212,12239,12199,12274,12329,12324,12366,12401,12411,12449,12411,12469,12484,12169,12386,12451,12354,12376,12526,12523,12399,12506,12641];;
  const log_close =  [-0.09678435562168586,-0.1007545826951044,-0.09282973416265694,-0.09233655165452781,-0.10874254387971138,-0.10874254387971138,-0.09951223437796042,-0.09653670929514524,-0.09851940860874286,-0.0911046111567071,-0.09901565059890993,-0.11856517419779555,-0.13824631971346513,-0.14836456519525187,-0.12925230724967296,-0.12440360919067484,-0.12465805891956583,-0.11452384239473501,-0.11175476195864764,-0.09258325463250028,-0.09381701920352059,-0.0911046111567071,-0.0913510103609978,-0.09061218394127923,-0.09505230783007645,-0.09209009893384223,-0.0960416956322181,-0.09727983233685089,-0.10150075232715539,-0.09752766278629421,-0.09431093257356649,-0.09678435562168586,-0.10249644824872872,-0.10799104928993675,-0.1200849186096109,-0.10874254387971138,-0.10324401499410829,-0.09703206329212222,-0.09061218394127923,-0.08154696594749611,-0.08008453962812245,-0.07813811444111307,-0.07984099410942624,-0.07026924260761858,-0.0713551681774578,-0.07207971235554211,-0.07474093681335559,-0.07425650001050732,-0.07280468898249337,-0.06701880050723208,-0.06318002561554747,-0.07087246111353673,-0.07328842281492776,-0.07183801555372016,-0.06198337256995057,-0.06677841601278622,-0.05673537395814421,-0.04561497877125298,-0.04561497877125298,-0.03671337243688022,-0.0362470970598161,-0.03345382263750718,-0.030668417931817515,-0.025812307159258197,-0.0288155749819321,-0.030900186923482398,-0.038113683922692765,-0.03415141011036571,-0.03345382263750718,-0.029047003808798877,-0.026735388322309817,-0.029510022202440478,-0.04396916814758445,-0.039749787947069404,-0.04773485362882024,-0.04045178280821604,-0.006959973821714982,-0.005715681574058884,0.0035113251395766376,0.007758644123699643,0.005301878255671522,0.008204556479835645,0.004630817987103963,-0.004585903986537687,-0.006394091763630705,-0.00820581626166117,-0.005263547896676268,0.0010440895017875818,0.006865879325832047,0.011321241903713641,0.021493847971935764,0.015535588402888045,0.017525622073082392,0.020613351626713072,0.022813098343238636,0.022593315960685256,0.026541606631389936,0.023472071444304188,0.033087505922874794,0.028291345711594307,0.025665545563108516,0.03243492444353624,0.03156401334032788,0.033087505922874794,0.0385099903639059,0.03699457631146075,0.01730467438997163,0.013985013456613071,0.01818800273335297,0.023911201942622196,0.033739745324866455,0.02981991236726156,0.017695267931607805,0.014369072605420197,0.01147725695679247,0.02695063785120322,0.022553964496455414,0.013924708733763946,0.019243917658401166,0.022553964496455414,0.009247098643909712,0.0036498888247868955,0.007235703432887153,0.025413970608274106,0.03110947655319407,0.045423322969114555,0.05421320583048406,0.04563864021275199,0.05250418086661979,0.053999727142092,0.053999727142092,0.044130527650424245,0.050578019812745456,0.052076447368065715,0.06377247664413543,0.058898080891120586,0.06017193712692137,0.047466926167707424,0.052076447368065715,0.05271789708933028,0.044777175520164025,0.050578019812745456,0.04929179337348,0.04585391110485393,0.04929179337348,0.0464994458714032,0.04821875510659135,0.05527991620980899,0.04563864021275199,0.034162871921087135,0.03263733963959714,0.031546271027832695,0.034380710624825284,0.03241928802521388,0.04369919664621502,0.03198287479635509,0.016587764987667786,0.018580455834817933,-0.00175314436364582,0.009247098643909712,-0.011735052029642201,-0.016305455667374957,-0.01882811881160018,-0.030840324452147794,-0.014246197437068897,-0.010595751166647904,-0.01951715969944301,-0.007639490070594057,-0.010823437671950487,-0.010595751166647904,0.005892464909346362,0.004323155468272777,-0.00514485977449608,-0.00469202947981584,-0.023661758985582537,-0.016992759931065304,-0.01813946442002745,-0.015618623466403303,-0.07066544608455416,-0.12227692415952651,-0.12533729985579312,-0.13844985501926121,-0.061996881404797755,-0.10786635216859475,-0.09589014966819898,-0.08601837616196617,-0.08332062688845987,-0.11643717382218854,-0.10510909603147178,-0.13277238574829786,-0.10887091368971591,-0.09118900834886645,-0.0728443563838792,-0.0655995865219281,-0.06680343990206028,-0.06055944412781056,-0.06319640286192163,-0.05102882114018037,-0.04088358174775175,-0.04724167941697077,-0.057213315441219326,-0.05864603905509247,-0.02967888248137074,-0.03853881891079869,-0.00514485977449608,0.0005017401994984461,-0.001527426967009582,0.003425251071583091,0.0040988409618818444,0.006340411590407324,-0.013789140342436834,-0.01196308552839298,-0.028518965636972204,-0.010595751166647904,-0.00582462024395447,-0.0071854419822514615,-0.008320948986654031,-0.012647498186408868,-0.010595751166647904,-0.0026565237788824803,-0.00605130978907642,-0.013104033664073533,-0.0019788261759217107,-0.000625152946284846,0.0032007350391363154,0.002077053366602133,-0.0008505803062548445,-0.012647498186408868,-0.0067315999600152665,-0.008093744412255077,-0.004239317407541687,-0.0001742778452182847,-0.004012951483371552,0.003874304048962607,0.01680946564325536,0.013374728816959003,0.015383437355471763,0.021163847823091775,0.022935675906413433,0.025146160655394656,0.034595748498646106,0.025587671860324068,0.028452627063315195,0.030650963611893012,0.03612562953554255,0.03612562953554255,0.03503310816294736,0.037216958607683814,0.03372045490097886,0.031528946862358076,0.032844394493196205,0.04048390092066789,0.04026639225181583,0.03612562953554255,0.04265589291556093,0.0463375033924569,0.05494714619556973,0.05558986244238051,0.05601813778626674,0.054089493569009495,0.05687413860718937,0.03503310816294736,0.04374012238984859,0.04612134683092739,0.042872799775770076,0.05151219546580377,0.05022101013088687,0.0617818523594611,0.0617818523594611,0.06751253681224512,0.06645379162797438,0.06666559803803151,0.06645379162797438,0.06666559803803151,0.06433285149828505,0.0742621869013842,0.07257908077710695,0.07384165581889857,0.07342094781561848,0.07363136406258342,0.0651817674328421,0.061143104776806734,0.06793573736165914,0.07678158638642074,0.0795038385209117,0.07657191203008651,0.08430200241076236,0.08804110746210947,0.09609482979183115,0.09424202113603997,0.09238577320703323,0.09114641013199387,0.09279857936843916,0.0983547303340302,0.0983547303340302,0.10612257535190084,0.10306350237706718,0.1053077267551128,0.1020417543039902,0.1081567191458821,0.11261741636525935,0.11221271264195343,0.11564744641085412,0.11846717406655438,0.11927129757217081,0.12228126329675026,0.11927129757217081,0.12388290187402307,0.12508237339017736,0.09958527546489027,0.11725965987986209,0.12248157025388329,0.1146384048269069,0.11645383961024658,0.12847326090904332,0.12827407468514318,0.1182659845617069,0.1268789634296934,0.13759124434705328];;
  const log_sp500 =  [-0.0699989677133317,-0.07716484693973769,-0.06643062969351732,-0.06798994738746345,-0.09141118961035666,-0.09656707863007341,-0.08553765822050252,-0.08472467864867461,-0.08969719301004098,-0.07402721230812404,-0.08781533610011394,-0.10636824270866718,-0.12649443460746035,-0.13425914999623068,-0.11147801040533167,-0.10681721197095051,-0.10677417891922936,-0.09006694550017968,-0.08625050893898134,-0.07024601900767635,-0.06825821663928089,-0.058582889203103505,-0.06056941644071223,-0.05633870171970656,-0.06531164397636324,-0.05389370657469961,-0.05705241674430539,-0.05545849163158145,-0.06145239242631639,-0.06149177226975411,-0.05144931519060947,-0.07282727856300752,-0.07443110759038873,-0.07745368860506296,-0.09486463311248627,-0.08335109867666901,-0.07888839869887398,-0.0682798430490319,-0.06081249089222851,-0.0554193486578729,-0.05416350779056245,-0.053898992696666426,-0.056799651404979556,-0.03996529451225328,-0.04190820814226903,-0.03910287371655663,-0.03659484261321033,-0.03845782581942281,-0.034427283661223385,-0.03568128656129588,-0.03145368290285511,-0.0408215315973095,-0.04068315027032199,-0.042365978924781444,-0.03343572322559574,-0.04306798705498416,-0.0334252802502899,-0.026337049233294607,-0.028409317739276574,-0.022375709031978275,-0.022336160494898394,-0.017667927712118114,-0.017839102840655485,-0.013875415897881993,-0.015699848654300297,-0.016174815321496894,-0.02540863958917683,-0.023265166458619646,-0.023564658471805444,-0.020916723845072482,-0.019303897900170952,-0.022609589572660127,-0.04139972450140483,-0.03731556649687917,-0.040131611310069815,-0.027940580280507277,-0.002959299323320508,0.004444454850675683,0.008194248886393751,0.009162843077350047,0.006265991600413301,0.0064981923645550665,0.0004300837823105752,-0.012861347084482944,-0.008951187338276156,-0.004995436817679888,-0.004973486196345078,0.00035276564794273213,0.003814725239479344,0.006830653059605396,0.012536350214867653,0.008727869131289978,0.008727869131289978,0.014319989528091881,0.016765453408673636,0.01721680065069542,0.02324998227883235,0.021378456439450133,0.02387080180698753,0.01770763452176105,0.014739350207481294,0.0228719766188501,0.017443245157386045,0.017416778168014346,0.021208933176799505,0.017337453696143257,-0.012599051608374268,-0.013464538358912037,-0.0026540589565140493,0.00460679062910252,0.015589023794229107,0.004065977741058546,-0.006693696200670729,-0.010987702659653209,-0.013214065809101783,-0.0006967091012768378,0.004826057395542094,-0.00633996412109461,-0.004780820027264099,-0.004780820027264099,-0.020312457677496454,-0.018738253299442675,-0.01759262996527866,0.0005545025392379443,-0.0015604218016278537,0.00838105650676546,0.017111065947361226,0.017111065947361226,0.0232302470343555,0.028529666493884775,0.025670450509418075,0.010982391477305953,0.020158035655022388,0.015468159598102105,0.0207297077502826,0.015670103760015763,0.008032413030520047,0.01523132043354991,0.01913237434916404,0.022770048704430224,0.0132602030107698,0.019950315306223487,0.020289840449898122,0.01756225726025029,0.027934570474485554,0.027862624078911935,0.03030462773446274,0.03267877660128704,0.028335171716998175,0.011123775044458384,0.006142281478206613,0.0014515663398100287,0.0015875813693941865,-0.014404161309130359,0.0013256191115331717,-0.016427783536776985,-0.02873807176828258,-0.017640599239546972,-0.03562027634700193,-0.030114841301546846,-0.057458383089976195,-0.0650550300085122,-0.060180062068020845,-0.07416842887448638,-0.05312552292128814,-0.046729887946682425,-0.05744055502100309,-0.04669994684804912,-0.04888723036183151,-0.04806291675399876,-0.03057079962536058,-0.02899770413470648,-0.040217344492305074,-0.0435298054994373,-0.06346440662628972,-0.05794116626864465,-0.05416706171343222,-0.04746140028394841,-0.09706731211294439,-0.15867637401117562,-0.16101056861713836,-0.17683565189419426,-0.08594077206115713,-0.1211613790852688,-0.10323099824949189,-0.09531767892314846,-0.09704695414844977,-0.11971020811335187,-0.11838424948957815,-0.14223389782359774,-0.11742694569814738,-0.10090308133126769,-0.08084645324868411,-0.07350036845298291,-0.07285986691398172,-0.06707422536842422,-0.06559532811649227,-0.05931598240004021,-0.044696791290926186,-0.051098838320244866,-0.058821823598636414,-0.054484885491927315,-0.04870186434446033,-0.049413598479336684,-0.017373621802317274,-0.0101515627820703,-0.00912767153979388,-0.005003854101037319,0.00197699526706252,-0.0010350522364603876,-0.017301771504220298,-0.017746741526641685,-0.024477641118114235,-0.004225060315929952,-0.004225060315929952,-0.009811862892375345,-0.005808692021743056,-0.005889880478738618,-0.0017962289881126026,0.003987304547257153,0.004060989291975403,-0.0012303686867216612,0.008997827528654412,0.009917352715046235,0.015385365256692651,0.012637704938406102,0.016452838010081905,0.005092169419979697,0.014440992568168554,0.006053732844524262,0.0057444448098049605,0.0057444448098049605,0.0035634095942160826,0.013124064665475998,0.024184393282434158,0.02418110717408517,0.03216923820660256,0.0373746374627526,0.042525774968881436,0.046140492165491764,0.054444870376157084,0.054444870376157084,0.04655150227191207,0.0458353590214422,0.051879161798222384,0.0546216028711477,0.05131863109792256,0.052725055428858525,0.04876091036318719,0.051949478888570155,0.05730885912858241,0.057218368825774135,0.05861652583144661,0.05925385432811403,0.06703538647381713,0.06773336647074935,0.07169981747242993,0.07187665994369752,0.06891282974623003,0.06766261580771982,0.06396095376134525,0.04783956657577626,0.0575994272867284,0.06485494950658222,0.06405715133475454,0.07182660615114322,0.06931933775725874,0.08060089683242921,0.08382577021647464,0.08412881509502945,0.08122747517866458,0.08112670692092827,0.07525137780872093,0.07281674717645714,0.0688045274475062,0.08387681260628455,0.07960130006663846,0.08372677377675508,0.08611490423005819,0.08926665167152414,0.08284791126873259,0.07590156120770075,0.08098867351064243,0.08930052061351645,0.08613034794358043,0.08823411239446877,0.09091865942454191,0.09389768765393924,0.10234777527703365,0.10186489739560578,0.1065604751221656,0.10527171468883445,0.10430107561058932,0.10907876344729672,0.11395228738477847,0.118352638099541,0.1128352862708013,0.10998460910550634,0.10496296036297892,0.11084744949339331,0.11347952675330575,0.11756203036681434,0.1209561845380378,0.12157434815942025,0.12163985881628747,0.12527981809904887,0.12146113039219664,0.12727187888638447,0.12451250490610555,0.0970265294662056,0.11093924100619645,0.11495715950962548,0.10864287923448224,0.11389975317900891,0.12451547731515333,0.1245481732315703,0.11919633845682753,0.12500681831884108,0.13429801150425646];;

  // Graphique 1
  const graph1 = document.getElementById("graph1");
  Plotly.newPlot(graph1, [
    {x:dates1, y:close1, type:"scatter", mode:"lines", name:"Prix", line:{color:"#007a33"}},
    {x:dates1, y:div1, type:"scatter", mode:"lines", name:"+dividende", line:{color:"orange"}}
  ], {margin:{t:30,l:50,r:30,b:40}, title:"Croissance de 10 000$", hovermode:"x unified"});

  // Graphique 2
  const graph2 = document.getElementById("graph2");
  Plotly.newPlot(graph2, [
    {x:dates1, y:log_close, type:"scatter", mode:"lines", name:"log(valeur)", line:{color:"#007a33"}},
    {x:dates1, y:log_sp500, type:"scatter", mode:"lines", name:"log(S&P500)", line:{color:"orange"}}
  ], {margin:{t:30,l:50,r:30,b:40}, title:"Comparaison avec S&P500", hovermode:"x unified"});

  // --- Synchronisation axes X ---
  graph1.on('plotly_relayout', function(e){
    if(e['xaxis.range[0]'] && e['xaxis.range[1]']){
      Plotly.relayout(graph2, {'xaxis.range':[e['xaxis.range[0]'], e['xaxis.range[1]']]});
    }
  });
  graph2.on('plotly_relayout', function(e){
    if(e['xaxis.range[0]'] && e['xaxis.range[1]']){
      Plotly.relayout(graph1, {'xaxis.range':[e['xaxis.range[0]'], e['xaxis.range[1]']]});
    }
  });

  // --- Graphique 3 : Scatter ---
  let tickers = ["CINF.TO","DMEC.TO","EBNK.TO","FCUV.TO","VFV.TO","ZEA.TO","ZGLD.TO","ZGQ.TO","ZID.TO","ZLB.TO","ZLU.TO","ZQQ.TO","ZUQ.TO","ZWE.TO","ZWG.TO","BKCL.TO","DRFC.TO","ESGA.TO","HURA.TO","XUSC.TO"];
  let slope = [9.24,22.08,24.69,18.79,13.81,6.37,35.59,12.64,10.92,10.2,10.98,16.1,14.41,6.47,8.84,18.96,11.3,9.63,28.79,13.21];
  let volatility = [4.03,3.2,8.08,5.8,7.59,7.14,3.49,7.72,14.19,7.56,8.53,10.06,7.49,7.36,5.08,4.62,9.79,10.04,20.51,4.48];

  let colors = tickers.map(t => t === "XUSC.TO" ? "red" : "grey");
  let sizes = tickers.map(t => t === "XUSC.TO" ? 12 : 8);
  let texts = tickers.map(t => t === "XUSC.TO" ? t : "");
  let hovertexts = tickers;

  Plotly.newPlot("graph3", [{
    x: slope,
    y: volatility,
    mode: "markers+text",
    text: texts,
    hovertext: hovertexts,
    hoverinfo: "text",
    textposition: "top center",
    marker: { color: colors, size: sizes }
  }], {
    margin: {t:30, l:50, r:30, b:40},
    title: "Slope vs Volatilité",
    xaxis: {title: "Slope"},
    yaxis: {title: "Volatilité"}
  });

  // --- Graphique 4 : Histogramme ---
  let secteurs = ["realestate","consumer_cyclical","basic_materials","consumer_defensive","technology","communication_services","financial_services","utilities","industrials","energy","healthcare"];
  let fractions = [2.3599999,11.26,1.9199998999999999,6.0,26.16,9.7799994,16.12,2.87,9.1800004,3.52,10.83];

  Plotly.newPlot("graph4", [{
    x: secteurs,
    y: fractions,
    type: "bar",
    text: secteurs,
    textposition: "inside",
    insidetextanchor: "middle",
    textangle: -90,
    marker: { color:["#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b","#003314","#00220d","#001107"] }
  }], {
    margin:{t:30,l:50,r:30,b:40},
    title:"Répartition par secteur",
    yaxis:{title:"Fraction du portefeuille (%)"},
    dragmode: false,
    staticPlot: true
  });
</script>

<footer class="footer">
  Mise à jour : 2025-10-24 14:54
</footer>
</body>
</html>